<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>æ¨¡ç¯„ç”Ÿ â€“ ç³»çµ±å‡ç´šæç¤º</title>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
}

/* èˆ‡å‰é ç›¸åŒå°ºå¯¸ */
#viewport{
  position:absolute;
  top:50%;
  left:50%;
  width:1080px;
  height:1920px;
  transform:translate(-50%,-50%) scale(var(--scale-factor,1));
  overflow:hidden;
  background:#000;
}

/* èƒŒæ™¯ 01.png */
.bg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
}
#final-shot{
  position:absolute;
  top:33%;
  left:50%;
  height: 25%;
  transform:translate(-50%,-50%);
  width:500px;          /* å¯ä¾ä½ è¦–è¦ºå†èª¿ */
  aspect-ratio:9/16;
  object-fit:cover;
  z-index:5;
  box-shadow:0 0 40px rgba(0,0,0,0.6);
}

/* ğŸŸ¢ æœ€çµ‚ç‰ˆ type-textï¼ˆé¿å…ä¸Šé¢è¢«è¦†è“‹ï¼‰ */
#type-text{
  position:absolute;
  left:53%;
  top:47%;
  transform:translateX(-50%);
  width:70%;
  color:#ffffff;

  font-family:-apple-system,"PingFang TC","Noto Sans TC","Helvetica Neue",Arial,sans-serif;

  font-size:30px;
  letter-spacing:5px;
  line-height:44px;
  font-weight:300;

  white-space:pre-line;
}
/* ======================
   SYSTEM GLITCHï¼ˆæ­»æ©Ÿï¼‰
====================== */
#viewport.glitch{
  animation: glitchShake 0.12s infinite;
}

#viewport.glitch::before,
#viewport.glitch::after{
  content:"";
  position:absolute;
  inset:0;
  background:inherit;
  pointer-events:none;
  mix-blend-mode:screen;
}

#viewport.glitch::before{
  animation: glitchRGB1 0.15s infinite;
  filter: hue-rotate(20deg);
  opacity:0.4;
}

#viewport.glitch::after{
  animation: glitchRGB2 0.18s infinite;
  filter: hue-rotate(-20deg);
  opacity:0.4;
}

@keyframes glitchShake{
  0%{ transform:translate(-50%,-50%) scale(var(--scale-factor,1)); }
  25%{ transform:translate(-49%,-50%) scale(var(--scale-factor,1)); }
  50%{ transform:translate(-50%,-49%) scale(var(--scale-factor,1)); }
  75%{ transform:translate(-51%,-50%) scale(var(--scale-factor,1)); }
}

@keyframes glitchRGB1{
  0%{ clip-path:inset(0 0 80% 0); }
  50%{ clip-path:inset(40% 0 20% 0); }
}

@keyframes glitchRGB2{
  0%{ clip-path:inset(20% 0 40% 0); }
  50%{ clip-path:inset(60% 0 10% 0); }
}

/* ======================
   SYSTEM POWER OFFï¼ˆé—œæ©Ÿï¼‰
====================== */
#viewport.shutdown{
  animation: powerOff 1.2s ease-in forwards;
}

@keyframes powerOff{
  0%{
    filter:brightness(1);
    transform:translate(-50%,-50%) scale(var(--scale-factor,1));
  }
  70%{
    filter:brightness(2);
    transform:translate(-50%,-50%) scale(var(--scale-factor,0.02));
  }
  100%{
    filter:brightness(0);
    transform:translate(-50%,-50%) scale(0);
  }
  
}


</style>
</head>

<body>
<div id="viewport">

  <img class="bg" src="image/10.png">
  <img id="final-shot" />

  <div id="type-text"></div>
</div>
<script>
  /* ======================
     9:16 SCALE
  ====================== */
  function resize(){
    const s = Math.min(
      window.innerWidth / 1080,
      window.innerHeight / 1920
    );
    document.documentElement.style.setProperty("--scale-factor", s);
  }
  resize();
  window.addEventListener("resize", resize);
  
  
  /* ======================
     DOM
  ====================== */
  const viewport = document.getElementById("viewport");
  const endingVideo = document.getElementById("ending-video");
  
  
  /* ======================
     æ‰“å­—æ©Ÿ
  ====================== */
  const TEXT = `
  > å¿«çœ‹çœ‹ç¾åœ¨çš„ä½ 
  çœŸæ˜¯å¤ªæ¼‚äº®äº†ï¼ï¼ï¼
  
  ä¸éæˆ‘è¦ºå¾—é€™ä¸æ˜¯ä½ çš„æ¥µé™
  é‚„èƒ½æ›´å¥½çœ‹ï¼æ›´å¥½çœ‹ï¼
  
  ï¼…ï¼Šï¼„ï¼ƒï¼ æ•…éšœï¼…ï¼Šï¼„ï¼ƒï¼ 
  ï¼…ï¼Šï¼„ï¼ƒï¼ ï¼…ï¼Šï¼„ï¼ƒï¼ ç³»çµ±å·²æ•…éšœï¼…ï¼Šï¼„ï¼ƒï¼ 
  
  >model 1 é€²å…¥æŠ½è±¡å¯©ç¾å€
  >model 1 é›¢æ¨¡ç¯„ç¾åªå·®ä¸€æ­¥äº†
  `;
  
  const el = document.getElementById("type-text");
  let i = 0;
  (function type(){
    if(i <= TEXT.length){
      el.textContent = TEXT.slice(0,i++);
      setTimeout(type, 45);
    }
  })();
  
  
  /* ======================
     BGMï¼ˆæœ¬é æ’­æ”¾ï¼‰
  ====================== */
  const bgm = new Audio("music2.mp3");
  bgm.loop = false;
  bgm.volume = 0.6;
  
  window.addEventListener("load", () => {
    bgm.play().catch(err=>{
      console.log("BGM failed:", err);
    });
  });
  
  // è¨˜éŒ„æ™‚é–“çµ¦ä¸‹ä¸€é 
  setInterval(() => {
    if (!bgm.paused) {
      localStorage.setItem("bgmTime", bgm.currentTime);
    }
  }, 500);
  
  
  /* ======================
     ä¸Šä¸€é æ‹æ”ç•«é¢
  ====================== */
  const shot = localStorage.getItem("makeup_shot") || localStorage.getItem("finalShot");
  if (shot) {
    document.getElementById("final-shot").src = shot;
  }
  
  
  /* ======================
     ç³»çµ±æ­»æ©Ÿ / é—œæ©Ÿæ™‚é–“è»¸
  ====================== */
  // 20 ç§’ï¼šé–‹å§‹ glitch
  setTimeout(() => {
    viewport.classList.add("glitch");
  }, 20000);
  
  // 27 ç§’ï¼šé—œæ©Ÿ
  setTimeout(() => {
    viewport.classList.remove("glitch");
    viewport.classList.add("shutdown");
  }, 27000);
  
  
  /* ======================
     30 ç§’ï¼šåœéŸ³æ¨‚ â†’ æ’­å‹•ç•«
  ====================== */
  setTimeout(() => {
  bgm.pause();
  location.href = "text.html";
}, 30000);

  </script>
  

</body>
</html>
