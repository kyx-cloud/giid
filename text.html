<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Face Filter</title>

<!-- face-api -->
<script src="https://cdn.jsdelivr.net/npm/face-api.js"></script>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  font-family: "PingFang TC", "Noto Sans TC", sans-serif;
}

/* 9:16 */
#viewport{
  position:absolute;
  width:1080px;
  height:1920px;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%) ;
  overflow:hidden;
  background:#000;
}
#viewport-scale{
  width:1080px;
  height:1920px;
  transform:scale(var(--scale-factor,1));

}
/* æ”å½±æ©Ÿ */
video{
  position:absolute;
  width:100%;
  height:100%;
  object-fit:cover;
  transform: scaleX(-1); /* âœ… é¡åƒ */
}

/* èƒŒæ™¯æ¡† */
#frame{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:contain;   /* ğŸ”¥ é—œéµ */
  pointer-events:none;
}
#faceText{
  position:absolute;
  left: 0;              /* ğŸ”¥ é—œéµï¼šçµ¦ä¸€å€‹æ˜ç¢ºèµ·é» */
  top: 0;
  width: auto;          /* ğŸ”¥ ä¸èƒ½ç”¨ % */
  max-width: none;
  pointer-events:none;
  z-index:10;

}




/* å·¦å³ç§»å‹•æ–‡å­— */
#floatText{
  width:100%;
  height:100%;

  /* ä¸‰ä»¶äº‹ä¸€èµ·åšï¼šæŠ–å‹• + é€æ˜åº¦ */
  animation:
    lagJitter 0.6s linear infinite,
    flickerOpacity 1.2s steps(1) infinite;
}


#floatWrap{
  position:absolute;
  top:40%;
  left:50%;
  width:160%;
  height:140%;
  transform:translate(-50%, -50%);
  animation: slideLR 3s linear infinite alternate;
  pointer-events:none;
}
@keyframes flickerOpacity{
  0%   { opacity:0.7; }
  20%  { opacity:0; }
  35%  { opacity:0.7; }
  55%  { opacity:0.2; }
  70%  { opacity:0.7; }
  85%  { opacity:0; }
  100% { opacity:0.7; }
}

/* å·¦å³æ•´å€‹æ»‘å‹•ï¼ˆä¸»é‹å‹•ï¼‰ */
@keyframes slideLR{
  from { transform:translate(-60%, -50%); }
  to   { transform:translate(-10%, -50%); }
}

/* ç•¶æ©Ÿæ„Ÿï¼ˆæŠ–ã€ä¸è¦å‰‡ï¼‰ */
@keyframes lagJitter{
  0%   { transform:translateX(0); }
  20%  { transform:translateX(-6px); }
  40%  { transform:translateX(4px); }
  60%  { transform:translateX(-3px); }
  80%  { transform:translateX(2px); }
  100% { transform:translateX(0); }
}




#canvas{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  pointer-events:none;
  z-index:9;   /* åœ¨ video ä¸Šã€frame ä¸‹ */
}


/* ä¸‹ä¸€æ­¥æŒ‰éˆ• */
#nextBtn{
  position:absolute;
  bottom:200px;
  right:60px;
  padding:28px 43px;
  background:#000;
  color:#fff;
  border-radius:40px;
  font-size:30px;
  border:none;
  cursor:pointer;
}
</style>
</head>

<body>

    <div id="viewport">
        <div id="viewport-scale">
        <video id="video" autoplay muted playsinline></video>
        <canvas id="canvas"></canvas>
        <div id="floatWrap">
            <img id="floatText" src="image/text2.png">
          </div>
          
        <img id="frame" src="image/11.png">
        <button id="nextBtn">ä¸‹ä¸€æ­¥</button>
      </div>
      </div><script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
      
      <script src="textFilter.js"></script>
      
    

</body>
</html>
